<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="递归搜索文件实例 #  require &#34;import&#34; function find(catalog,name) local n=0 local t=os.clock() local ret={} require &#34;import&#34; import &#34;java.io.File&#34; import &#34;java.lang.String&#34; function FindFile(catalog,name) local name=tostring(name) local ls=catalog.listFiles() or File{} for 次数=0,#ls-1 do --local 目录=tostring(ls[次数]) local f=ls[次数] if f.isDirectory() then--如果是文件夹则继续匹配 FindFile(f,name) else--如果是文件则 n=n&#43;1 if n%1000==0 then --print(n,os.clock()-t) end local nm=f.Name if string.find(nm,name) then --thread(insert,目录) table.insert(ret,nm) print(nm) end end luajava.clear(f) end end FindFile(catalog,name) print(&#34;ok&#34;,n,#ret) end import &#34;java.io.File&#34; catalog=File(&#34;sdcard/&#34;) name=&#34;.j?pn?g&#34; --task(find,catalog,name,print) thread(find,catalog,name) 获取Lua文件的执行路径 #  activity.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="03-10 文件处理" />
<meta property="og:description" content="递归搜索文件实例 #  require &#34;import&#34; function find(catalog,name) local n=0 local t=os.clock() local ret={} require &#34;import&#34; import &#34;java.io.File&#34; import &#34;java.lang.String&#34; function FindFile(catalog,name) local name=tostring(name) local ls=catalog.listFiles() or File{} for 次数=0,#ls-1 do --local 目录=tostring(ls[次数]) local f=ls[次数] if f.isDirectory() then--如果是文件夹则继续匹配 FindFile(f,name) else--如果是文件则 n=n&#43;1 if n%1000==0 then --print(n,os.clock()-t) end local nm=f.Name if string.find(nm,name) then --thread(insert,目录) table.insert(ret,nm) print(nm) end end luajava.clear(f) end end FindFile(catalog,name) print(&#34;ok&#34;,n,#ret) end import &#34;java.io.File&#34; catalog=File(&#34;sdcard/&#34;) name=&#34;.j?pn?g&#34; --task(find,catalog,name,print) thread(find,catalog,name) 获取Lua文件的执行路径 #  activity." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lua.dianas.cyou/docs/03/0310file/" /><meta property="article:section" content="docs" />



<title>03-10 文件处理 | LUA book</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css" integrity="sha256-gsXb0jRHzuC0wqo&#43;0Izglh&#43;qQOH6Nw7uT4yfAuDUa18=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.5864140064a36607902403553f21110d5e86d88b71d98b61bc41e2500a4ef661.js" integrity="sha256-WGQUAGSjZgeQJANVPyERDV6G2Itx2YthvEHiUApO9mE=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>LUA book</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/01/" class="">01 初步认识LUA</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/01/0101sudo/" class="">01-01 开发素养</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/01/0102alua/" class="">01-02 认识Alua写法</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/02/" class="">02 常用函数</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/" class="">03 MLUA教程</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0301when/" class="">03-01 when的用法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0302defer/" class="">03-02 Defer关键字</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0303luawebviewzidingyi/" class="">03-03 LuaWebView自定义进度条</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0304string/" class="">03-04 字符串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0305layout/" class="">03-05 界面&amp;布局</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0306system/" class="">03-06 系统调用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0307caculate/" class="">03-07 各式算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0308sent/" class="">03-08 信息&amp;发送</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0309sthing/" class="">03-09 事件</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0310file/" class=" active">03-10 文件处理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://lua.dianas.cyou/docs/03/0311animation/" class="">03-11 动画</a>
  

        </li>
      
    
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/posts/" >
        Blog
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>03-10 文件处理</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#递归搜索文件实例">递归搜索文件实例</a></li>
    <li><a href="#获取lua文件的执行路径">获取Lua文件的执行路径</a></li>
    <li><a href="#压缩成zip">压缩成ZIP</a></li>
    <li><a href="#zip解压">ZIP解压</a></li>
    <li><a href="#删除文件夹">删除文件夹</a></li>
    <li><a href="#重命名文件夹">重命名文件夹</a></li>
    <li><a href="#创建文件夹">创建文件夹</a></li>
    <li><a href="#删除文件">删除文件</a></li>
    <li><a href="#判断文件是否存在">判断文件是否存在</a></li>
    <li><a href="#判断文件夹是否存在">判断文件夹是否存在</a></li>
    <li><a href="#创建新文件">创建新文件</a></li>
    <li><a href="#创建新文件夹">创建新文件夹</a></li>
    <li><a href="#重命名与移动文件">重命名与移动文件</a></li>
    <li><a href="#追加更新文件">追加更新文件</a></li>
    <li><a href="#更新文件">更新文件</a></li>
    <li><a href="#写入文件">写入文件</a></li>
    <li><a href="#写入文件自动创建父文件夹">写入文件(自动创建父文件夹)</a></li>
    <li><a href="#读取文件">读取文件</a></li>
    <li><a href="#按行读取文件">按行读取文件</a></li>
    <li><a href="#删除文件或文件夹">删除文件或文件夹</a></li>
    <li><a href="#复制文件">复制文件</a></li>
    <li><a href="#递归删除文件夹或文件">递归删除文件夹或文件</a></li>
    <li><a href="#替换文件内字符串">替换文件内字符串</a></li>
    <li><a href="#获取文件列表">获取文件列表</a></li>
    <li><a href="#获取文件名称">获取文件名称</a></li>
    <li><a href="#获取文件大小">获取文件大小</a></li>
    <li><a href="#获取文件或文件夹最后修改时间">获取文件或文件夹最后修改时间</a></li>
    <li><a href="#获取文件字节">获取文件字节</a></li>
    <li><a href="#获取文件父文件夹路径">获取文件父文件夹路径</a></li>
    <li><a href="#获取文件mime类型">获取文件Mime类型</a></li>
    <li><a href="#判断路径是不是文件夹">判断路径是不是文件夹</a></li>
    <li><a href="#判断路径是不是文件">判断路径是不是文件</a></li>
    <li><a href="#判断文件或文件夹存不存在">判断文件或文件夹存不存在</a></li>
    <li><a href="#判断是不是系统隐藏文件">判断是不是系统隐藏文件</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h2 id="递归搜索文件实例">
  递归搜索文件实例
  <a class="anchor" href="#%e9%80%92%e5%bd%92%e6%90%9c%e7%b4%a2%e6%96%87%e4%bb%b6%e5%ae%9e%e4%be%8b">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
require <span style="color:#e6db74">&#34;import&#34;</span>

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">find</span>(catalog,name)

<span style="color:#66d9ef">local</span> n<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>

<span style="color:#66d9ef">local</span> t<span style="color:#f92672">=</span>os.clock()

<span style="color:#66d9ef">local</span> ret<span style="color:#f92672">=</span>{}

require <span style="color:#e6db74">&#34;import&#34;</span>

import <span style="color:#e6db74">&#34;java.io.File&#34;</span>

import <span style="color:#e6db74">&#34;java.lang.String&#34;</span>

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">FindFile</span>(catalog,name)

<span style="color:#66d9ef">local</span> name<span style="color:#f92672">=</span>tostring(name)

<span style="color:#66d9ef">local</span> ls<span style="color:#f92672">=</span>catalog.listFiles() <span style="color:#f92672">or</span> File{}

<span style="color:#66d9ef">for</span> <span style="color:#960050;background-color:#1e0010">次数</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,<span style="color:#f92672">#</span>ls<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">do</span>

<span style="color:#75715e">--local 目录=tostring(ls[次数])</span>

<span style="color:#66d9ef">local</span> f<span style="color:#f92672">=</span>ls[<span style="color:#960050;background-color:#1e0010">次数</span>]

<span style="color:#66d9ef">if</span> f.isDirectory() <span style="color:#66d9ef">then</span><span style="color:#75715e">--如果是文件夹则继续匹配</span>

FindFile(f,name)

<span style="color:#66d9ef">else</span><span style="color:#75715e">--如果是文件则</span>

n<span style="color:#f92672">=</span>n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>

<span style="color:#66d9ef">if</span> n<span style="color:#f92672">%</span><span style="color:#ae81ff">1000</span><span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#66d9ef">then</span>

<span style="color:#75715e">--print(n,os.clock()-t)</span>

<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">local</span> nm<span style="color:#f92672">=</span>f.Name

<span style="color:#66d9ef">if</span> string.find(nm,name) <span style="color:#66d9ef">then</span>

<span style="color:#75715e">--thread(insert,目录)</span>

table.insert(ret,nm)

print(nm)

<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">end</span>

luajava.clear(f)

<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">end</span>

FindFile(catalog,name)

print(<span style="color:#e6db74">&#34;ok&#34;</span>,n,<span style="color:#f92672">#</span>ret)

<span style="color:#66d9ef">end</span>

import <span style="color:#e6db74">&#34;java.io.File&#34;</span>

catalog<span style="color:#f92672">=</span>File(<span style="color:#e6db74">&#34;sdcard/&#34;</span>)

name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;.j?pn?g&#34;</span>

<span style="color:#75715e">--task(find,catalog,name,print)</span>

thread(find,catalog,name)
</code></pre></div><h2 id="获取lua文件的执行路径">
  获取Lua文件的执行路径
  <a class="anchor" href="#%e8%8e%b7%e5%8f%96lua%e6%96%87%e4%bb%b6%e7%9a%84%e6%89%a7%e8%a1%8c%e8%b7%af%e5%be%84">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
activity.getLuaDir()
</code></pre></div><h2 id="压缩成zip">
  压缩成ZIP
  <a class="anchor" href="#%e5%8e%8b%e7%bc%a9%e6%88%90zip">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
ZipUtil.zip(<span style="color:#e6db74">&#34;文件或文件夹路径&#34;</span>,<span style="color:#e6db74">&#34;压缩到的路径&#34;</span>)
</code></pre></div><h2 id="zip解压">
  ZIP解压
  <a class="anchor" href="#zip%e8%a7%a3%e5%8e%8b">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
ZipUtil.unzip(<span style="color:#e6db74">&#34;ZIP路径&#34;</span>,<span style="color:#e6db74">&#34;解压到的路径&#34;</span>)

<span style="color:#75715e">--另一种Java方法</span>

import <span style="color:#e6db74">&#34;java.io.FileOutputStream&#34;</span>

import <span style="color:#e6db74">&#34;java.util.zip.ZipFile&#34;</span>

import <span style="color:#e6db74">&#34;java.io.File&#34;</span>

zipfile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/sdcard/压缩包.zip&#34;</span><span style="color:#75715e">--压缩文件路径和文件名</span>

sdpath <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/sdcard/文件.lua&#34;</span><span style="color:#75715e">--解压后路径和文件名</span>

zipfilepath <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;内容.lua&#34;</span><span style="color:#75715e">--需要解压的文件名</span>

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">unzip</span>(zippath , outfilepath , filename)

<span style="color:#66d9ef">local</span> time<span style="color:#f92672">=</span>os.clock()

task(<span style="color:#66d9ef">function</span>(zippath,outfilepath,filename)

require <span style="color:#e6db74">&#34;import&#34;</span>

import <span style="color:#e6db74">&#34;java.util.zip.*&#34;</span>

import <span style="color:#e6db74">&#34;java.io.*&#34;</span>

<span style="color:#66d9ef">local</span> file <span style="color:#f92672">=</span> File(zippath)

<span style="color:#66d9ef">local</span> outFile <span style="color:#f92672">=</span> File(outfilepath)

<span style="color:#66d9ef">local</span> zipFile <span style="color:#f92672">=</span> ZipFile(file)

<span style="color:#66d9ef">local</span> entry <span style="color:#f92672">=</span> zipFile.getEntry(filename)

<span style="color:#66d9ef">local</span> input <span style="color:#f92672">=</span> zipFile.getInputStream(entry)

<span style="color:#66d9ef">local</span> output <span style="color:#f92672">=</span> FileOutputStream(outFile)

<span style="color:#66d9ef">local</span> byte<span style="color:#f92672">=</span>byte[entry.getSize()]

<span style="color:#66d9ef">local</span> temp<span style="color:#f92672">=</span>input.read(byte)

<span style="color:#66d9ef">while</span> temp <span style="color:#f92672">~=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">do</span>

output.write(byte)

temp<span style="color:#f92672">=</span>input.read(byte)

<span style="color:#66d9ef">end</span>

input.close()

output.close()

<span style="color:#66d9ef">end</span>,zippath,outfilepath,filename,

<span style="color:#66d9ef">function</span>()

print(<span style="color:#e6db74">&#34;解压完成，耗时 &#34;</span><span style="color:#f92672">..</span>os.clock()<span style="color:#f92672">-</span>time<span style="color:#f92672">..</span><span style="color:#e6db74">&#34; s&#34;</span>)

<span style="color:#66d9ef">end</span>)

<span style="color:#66d9ef">end</span>

unzip(zipfile,sdpath,zipfilepath)
</code></pre></div><h2 id="删除文件夹">
  删除文件夹
  <a class="anchor" href="#%e5%88%a0%e9%99%a4%e6%96%87%e4%bb%b6%e5%a4%b9">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--shell命令的方法</span>

os.execute(<span style="color:#e6db74">&#34;rm-r 路径&#34;</span>)
</code></pre></div><h2 id="重命名文件夹">
  重命名文件夹
  <a class="anchor" href="#%e9%87%8d%e5%91%bd%e5%90%8d%e6%96%87%e4%bb%b6%e5%a4%b9">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--shell命令的方法</span>

os.execute(<span style="color:#e6db74">&#34;mv 路径新路径&#34;</span>)
</code></pre></div><h2 id="创建文件夹">
  创建文件夹
  <a class="anchor" href="#%e5%88%9b%e5%bb%ba%e6%96%87%e4%bb%b6%e5%a4%b9">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--shell命令的方法</span>

os.execute(<span style="color:#e6db74">&#34;mkdir 路径&#34;</span>)
</code></pre></div><h2 id="删除文件">
  删除文件
  <a class="anchor" href="#%e5%88%a0%e9%99%a4%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
os.remove(<span style="color:#e6db74">&#34;路径&#34;</span>)
</code></pre></div><h2 id="判断文件是否存在">
  判断文件是否存在
  <a class="anchor" href="#%e5%88%a4%e6%96%ad%e6%96%87%e4%bb%b6%e6%98%af%e5%90%a6%e5%ad%98%e5%9c%a8">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--先导入io包</span>

import <span style="color:#e6db74">&#34;java.io.*&#34;</span>

file,err<span style="color:#f92672">=</span>io.open(<span style="color:#e6db74">&#34;路径&#34;</span>)

print(err)

<span style="color:#66d9ef">if</span> err<span style="color:#f92672">==</span><span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">then</span>

print(<span style="color:#e6db74">&#34;存在&#34;</span>)

<span style="color:#66d9ef">else</span>

print(<span style="color:#e6db74">&#34;不存在&#34;</span>)

<span style="color:#66d9ef">end</span>
</code></pre></div><h2 id="判断文件夹是否存在">
  判断文件夹是否存在
  <a class="anchor" href="#%e5%88%a4%e6%96%ad%e6%96%87%e4%bb%b6%e5%a4%b9%e6%98%af%e5%90%a6%e5%ad%98%e5%9c%a8">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--先导入io包</span>

import <span style="color:#e6db74">&#34;java.io.*&#34;</span>

<span style="color:#66d9ef">if</span> File(<span style="color:#960050;background-color:#1e0010">文件夹路径</span>).isDirectory()<span style="color:#66d9ef">then</span>

print(<span style="color:#e6db74">&#34;存在&#34;</span>)

<span style="color:#66d9ef">else</span>

print(<span style="color:#e6db74">&#34;不存在&#34;</span>)

<span style="color:#66d9ef">end</span>
</code></pre></div><h2 id="创建新文件">
  创建新文件
  <a class="anchor" href="#%e5%88%9b%e5%bb%ba%e6%96%b0%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--使用File类</span>

import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">文件路径</span>).createNewFile()

<span style="color:#75715e">--使用io库</span>

io.open(<span style="color:#e6db74">&#34;/sdcard/aaaa&#34;</span>, <span style="color:#e6db74">&#39;w&#39;</span>)
</code></pre></div><h2 id="创建新文件夹">
  创建新文件夹
  <a class="anchor" href="#%e5%88%9b%e5%bb%ba%e6%96%b0%e6%96%87%e4%bb%b6%e5%a4%b9">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--使用File类</span>

import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">文件夹路径</span>).mkdir()

<span style="color:#75715e">--创建多级文件夹</span>

File(<span style="color:#960050;background-color:#1e0010">文件夹路径</span>).mkdirs()

<span style="color:#75715e">--shell</span>

os.execute(<span style="color:#e6db74">&#39;mkdir &#39;</span><span style="color:#f92672">..</span><span style="color:#960050;background-color:#1e0010">文件夹路径</span>)
</code></pre></div><h2 id="重命名与移动文件">
  重命名与移动文件
  <a class="anchor" href="#%e9%87%8d%e5%91%bd%e5%90%8d%e4%b8%8e%e7%a7%bb%e5%8a%a8%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--Shell</span>

os.execute(<span style="color:#e6db74">&#34;mv &#34;</span><span style="color:#f92672">..</span>oldname<span style="color:#f92672">..</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">..</span>newname)

<span style="color:#75715e">--os</span>

os.rename (oldname, newname)

<span style="color:#75715e">--File</span>

import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">旧</span>).renameTo(File(<span style="color:#960050;background-color:#1e0010">新</span>))
</code></pre></div><h2 id="追加更新文件">
  追加更新文件
  <a class="anchor" href="#%e8%bf%bd%e5%8a%a0%e6%9b%b4%e6%96%b0%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
io.open(<span style="color:#960050;background-color:#1e0010">文件路径</span>,<span style="color:#e6db74">&#34;a+&#34;</span>):write(<span style="color:#e6db74">&#34;更新的内容&#34;</span>):close()
</code></pre></div><h2 id="更新文件">
  更新文件
  <a class="anchor" href="#%e6%9b%b4%e6%96%b0%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
io.open(<span style="color:#960050;background-color:#1e0010">文件路径</span>,<span style="color:#e6db74">&#34;w+&#34;</span>):write(<span style="color:#e6db74">&#34;更新的内容&#34;</span>):close()
</code></pre></div><h2 id="写入文件">
  写入文件
  <a class="anchor" href="#%e5%86%99%e5%85%a5%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
io.open(<span style="color:#960050;background-color:#1e0010">文件路径</span>,<span style="color:#e6db74">&#34;w&#34;</span>):write(<span style="color:#e6db74">&#34;内容&#34;</span>):close()
</code></pre></div><h2 id="写入文件自动创建父文件夹">
  写入文件(自动创建父文件夹)
  <a class="anchor" href="#%e5%86%99%e5%85%a5%e6%96%87%e4%bb%b6%e8%87%aa%e5%8a%a8%e5%88%9b%e5%bb%ba%e7%88%b6%e6%96%87%e4%bb%b6%e5%a4%b9">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">写入文件</span>(<span style="color:#960050;background-color:#1e0010">路径</span>,<span style="color:#960050;background-color:#1e0010">内容</span>)

import <span style="color:#e6db74">&#34;java.io.File&#34;</span>

f<span style="color:#f92672">=</span>File(tostring(File(tostring(<span style="color:#960050;background-color:#1e0010">路径</span>)).getParentFile())).mkdirs()

io.open(tostring(<span style="color:#960050;background-color:#1e0010">路径</span>),<span style="color:#e6db74">&#34;w&#34;</span>):write(tostring(<span style="color:#960050;background-color:#1e0010">内容</span>)):close()

<span style="color:#66d9ef">end</span>
</code></pre></div><h2 id="读取文件">
  读取文件
  <a class="anchor" href="#%e8%af%bb%e5%8f%96%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
io.open(<span style="color:#960050;background-color:#1e0010">文件路径</span>):read(<span style="color:#e6db74">&#34;*a&#34;</span>)
</code></pre></div><h2 id="按行读取文件">
  按行读取文件
  <a class="anchor" href="#%e6%8c%89%e8%a1%8c%e8%af%bb%e5%8f%96%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#66d9ef">for</span> c <span style="color:#66d9ef">in</span> io.lines(<span style="color:#960050;background-color:#1e0010">文件路径</span>) <span style="color:#66d9ef">do</span>

print(c)

<span style="color:#66d9ef">end</span>
</code></pre></div><h2 id="删除文件或文件夹">
  删除文件或文件夹
  <a class="anchor" href="#%e5%88%a0%e9%99%a4%e6%96%87%e4%bb%b6%e6%88%96%e6%96%87%e4%bb%b6%e5%a4%b9">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--使用File类</span>

import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">文件路径</span>).delete()

<span style="color:#75715e">--使用os方法</span>

os.remove (filename)
</code></pre></div><h2 id="复制文件">
  复制文件
  <a class="anchor" href="#%e5%a4%8d%e5%88%b6%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
LuaUtil.copyDir(from,to)
</code></pre></div><h2 id="递归删除文件夹或文件">
  递归删除文件夹或文件
  <a class="anchor" href="#%e9%80%92%e5%bd%92%e5%88%a0%e9%99%a4%e6%96%87%e4%bb%b6%e5%a4%b9%e6%88%96%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#75715e">--使用LuaUtil辅助库</span>

LuaUtil.rmDir(<span style="color:#960050;background-color:#1e0010">路径</span>)

<span style="color:#75715e">--使用Shell</span>

os.execute(<span style="color:#e6db74">&#34;rm -r &#34;</span><span style="color:#f92672">..</span><span style="color:#960050;background-color:#1e0010">路径</span>)
</code></pre></div><h2 id="替换文件内字符串">
  替换文件内字符串
  <a class="anchor" href="#%e6%9b%bf%e6%8d%a2%e6%96%87%e4%bb%b6%e5%86%85%e5%ad%97%e7%ac%a6%e4%b8%b2">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">替换文件字符串</span>(<span style="color:#960050;background-color:#1e0010">路径</span>,<span style="color:#960050;background-color:#1e0010">要替换的字符串</span>,<span style="color:#960050;background-color:#1e0010">替换成的字符串</span>)

<span style="color:#66d9ef">if</span> <span style="color:#960050;background-color:#1e0010">路径</span> <span style="color:#66d9ef">then</span>

<span style="color:#960050;background-color:#1e0010">路径</span><span style="color:#f92672">=</span>tostring(<span style="color:#960050;background-color:#1e0010">路径</span>)

<span style="color:#960050;background-color:#1e0010">内容</span><span style="color:#f92672">=</span>io.open(<span style="color:#960050;background-color:#1e0010">路径</span>):read(<span style="color:#e6db74">&#34;*a&#34;</span>)

io.open(<span style="color:#960050;background-color:#1e0010">路径</span>,<span style="color:#e6db74">&#34;w+&#34;</span>):write(tostring(<span style="color:#960050;background-color:#1e0010">内容</span>:gsub(<span style="color:#960050;background-color:#1e0010">要替换的字符串</span>,<span style="color:#960050;background-color:#1e0010">替换成的字符串</span>))):close()

<span style="color:#66d9ef">else</span>

<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>

<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">end</span>
</code></pre></div><h2 id="获取文件列表">
  获取文件列表
  <a class="anchor" href="#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e5%88%97%e8%a1%a8">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
import(<span style="color:#e6db74">&#34;java.io.File&#34;</span>)

luajava.astable(File(<span style="color:#960050;background-color:#1e0010">文件夹路径</span>).listFiles())
</code></pre></div><h2 id="获取文件名称">
  获取文件名称
  <a class="anchor" href="#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e5%90%8d%e7%a7%b0">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">路径</span>).getName()
</code></pre></div><h2 id="获取文件大小">
  获取文件大小
  <a class="anchor" href="#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e5%a4%a7%e5%b0%8f">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">GetFileSize</span>(path)

import <span style="color:#e6db74">&#34;java.io.File&#34;</span>

import <span style="color:#e6db74">&#34;android.text.format.Formatter&#34;</span>

size<span style="color:#f92672">=</span>File(tostring(path)).length()

Sizes<span style="color:#f92672">=</span>Formatter.formatFileSize(activity, size)

<span style="color:#66d9ef">return</span> Sizes

<span style="color:#66d9ef">end</span>
</code></pre></div><h2 id="获取文件或文件夹最后修改时间">
  获取文件或文件夹最后修改时间
  <a class="anchor" href="#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e6%88%96%e6%96%87%e4%bb%b6%e5%a4%b9%e6%9c%80%e5%90%8e%e4%bf%ae%e6%94%b9%e6%97%b6%e9%97%b4">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">GetFilelastTime</span>(path)

f <span style="color:#f92672">=</span> File(path);

cal <span style="color:#f92672">=</span> Calendar.getInstance();

time <span style="color:#f92672">=</span> f.lastModified()

cal.setTimeInMillis(time);

<span style="color:#66d9ef">return</span> cal.getTime().toLocaleString()

<span style="color:#66d9ef">end</span>
</code></pre></div><h2 id="获取文件字节">
  获取文件字节
  <a class="anchor" href="#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e5%ad%97%e8%8a%82">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">路径</span>).length()
</code></pre></div><h2 id="获取文件父文件夹路径">
  获取文件父文件夹路径
  <a class="anchor" href="#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e7%88%b6%e6%96%87%e4%bb%b6%e5%a4%b9%e8%b7%af%e5%be%84">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(path).getParentFile()
</code></pre></div><h2 id="获取文件mime类型">
  获取文件Mime类型
  <a class="anchor" href="#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6mime%e7%b1%bb%e5%9e%8b">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">GetFileMime</span>(name)

import <span style="color:#e6db74">&#34;android.webkit.MimeTypeMap&#34;</span>

ExtensionName<span style="color:#f92672">=</span>tostring(name):match(<span style="color:#e6db74">&#34;%.(.+)&#34;</span>)

Mime<span style="color:#f92672">=</span>MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)

<span style="color:#66d9ef">return</span> tostring(Mime)

<span style="color:#66d9ef">end</span>

print(GetFileMime(<span style="color:#e6db74">&#34;/sdcard/a.png&#34;</span>))
</code></pre></div><h2 id="判断路径是不是文件夹">
  判断路径是不是文件夹
  <a class="anchor" href="#%e5%88%a4%e6%96%ad%e8%b7%af%e5%be%84%e6%98%af%e4%b8%8d%e6%98%af%e6%96%87%e4%bb%b6%e5%a4%b9">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">路径</span>).isDirectory()

<span style="color:#75715e">--也可用来判断文件夹存不存在</span>
</code></pre></div><h2 id="判断路径是不是文件">
  判断路径是不是文件
  <a class="anchor" href="#%e5%88%a4%e6%96%ad%e8%b7%af%e5%be%84%e6%98%af%e4%b8%8d%e6%98%af%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">路径</span>).isFile()

<span style="color:#75715e">--也可用来判断文件存不存在</span>
</code></pre></div><h2 id="判断文件或文件夹存不存在">
  判断文件或文件夹存不存在
  <a class="anchor" href="#%e5%88%a4%e6%96%ad%e6%96%87%e4%bb%b6%e6%88%96%e6%96%87%e4%bb%b6%e5%a4%b9%e5%ad%98%e4%b8%8d%e5%ad%98%e5%9c%a8">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">路径</span>).exists()

<span style="color:#75715e">--使用io</span>

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">file_exists</span>(path)

<span style="color:#66d9ef">local</span> f<span style="color:#f92672">=</span>io.open(path,<span style="color:#e6db74">&#39;r&#39;</span>)

<span style="color:#66d9ef">if</span> f<span style="color:#f92672">~=</span><span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">then</span> io.close(f) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span> <span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">end</span>
</code></pre></div><h2 id="判断是不是系统隐藏文件">
  判断是不是系统隐藏文件
  <a class="anchor" href="#%e5%88%a4%e6%96%ad%e6%98%af%e4%b8%8d%e6%98%af%e7%b3%bb%e7%bb%9f%e9%9a%90%e8%97%8f%e6%96%87%e4%bb%b6">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">
import <span style="color:#e6db74">&#34;java.io.File&#34;</span><span style="color:#75715e">--导入File类</span>

File(<span style="color:#960050;background-color:#1e0010">路径</span>).isHidden()
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#递归搜索文件实例">递归搜索文件实例</a></li>
    <li><a href="#获取lua文件的执行路径">获取Lua文件的执行路径</a></li>
    <li><a href="#压缩成zip">压缩成ZIP</a></li>
    <li><a href="#zip解压">ZIP解压</a></li>
    <li><a href="#删除文件夹">删除文件夹</a></li>
    <li><a href="#重命名文件夹">重命名文件夹</a></li>
    <li><a href="#创建文件夹">创建文件夹</a></li>
    <li><a href="#删除文件">删除文件</a></li>
    <li><a href="#判断文件是否存在">判断文件是否存在</a></li>
    <li><a href="#判断文件夹是否存在">判断文件夹是否存在</a></li>
    <li><a href="#创建新文件">创建新文件</a></li>
    <li><a href="#创建新文件夹">创建新文件夹</a></li>
    <li><a href="#重命名与移动文件">重命名与移动文件</a></li>
    <li><a href="#追加更新文件">追加更新文件</a></li>
    <li><a href="#更新文件">更新文件</a></li>
    <li><a href="#写入文件">写入文件</a></li>
    <li><a href="#写入文件自动创建父文件夹">写入文件(自动创建父文件夹)</a></li>
    <li><a href="#读取文件">读取文件</a></li>
    <li><a href="#按行读取文件">按行读取文件</a></li>
    <li><a href="#删除文件或文件夹">删除文件或文件夹</a></li>
    <li><a href="#复制文件">复制文件</a></li>
    <li><a href="#递归删除文件夹或文件">递归删除文件夹或文件</a></li>
    <li><a href="#替换文件内字符串">替换文件内字符串</a></li>
    <li><a href="#获取文件列表">获取文件列表</a></li>
    <li><a href="#获取文件名称">获取文件名称</a></li>
    <li><a href="#获取文件大小">获取文件大小</a></li>
    <li><a href="#获取文件或文件夹最后修改时间">获取文件或文件夹最后修改时间</a></li>
    <li><a href="#获取文件字节">获取文件字节</a></li>
    <li><a href="#获取文件父文件夹路径">获取文件父文件夹路径</a></li>
    <li><a href="#获取文件mime类型">获取文件Mime类型</a></li>
    <li><a href="#判断路径是不是文件夹">判断路径是不是文件夹</a></li>
    <li><a href="#判断路径是不是文件">判断路径是不是文件</a></li>
    <li><a href="#判断文件或文件夹存不存在">判断文件或文件夹存不存在</a></li>
    <li><a href="#判断是不是系统隐藏文件">判断是不是系统隐藏文件</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












